---
title: "Baseballr"
author: "Matthew Adams"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

pacman::p_load(tidyverse, baseballr, janitor, data.table)
```


```{r Baseball Reference}
# List data files to compile
data_files <- list.files(pattern = "sportsref_download")

type_summary <- map_dfr(data_files, function(file) {
  df <- read_csv(file) %>% clean_names()
  tibble(
    file = file,
    column = names(df),
    type = map_chr(df, ~ class(.x)[1])
  )
})

type_summary_wide <- type_summary %>%
  pivot_wider(
    names_from = file,
    values_from = type
  )


# function to process data files
process_sportsref <- function(filename) {
  fread(filename) %>% 
    clean_names() %>% 
    mutate(season = str_extract(filename, "\\d{4}"))
}

all_season_data <- map_dfr(data_files, process_sportsref)

```


```{r baseballr}
ncaa_school_id_lu("LSU")

team_id <- 365

df <- ncaa_team_player_stats(team_id = 365, year = 2023, type = "pitching") %>% 
  clean_names() %>% 
  filter(pos == "P") %>% 
  arrange(era) %>% 
  select(player, era)

df

```


